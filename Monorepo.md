📋 Tổng quan dự án Datban Server là một microservice API được xây dựng bằng NestJS với kiến trúc Onion Architecture, Domain-Driven Design (DDD) và Ports and Adapters. Đây là một boilerplate template cho việc phát triển microservice với đầy đủ các tính năng enterprise. 🏗️ Kiến trúc và Design Patterns 1. Onion Architecture Core Layer: Chứa business logic, entities, use cases và repository interfaces Infrastructure Layer: Implementations của các ports (database, cache, email, etc.) Application Layer: Controllers và adapters Presentation Layer: HTTP endpoints và Swagger documentation 2. Design Patterns được sử dụng Repository Pattern: Generic repository cho cả MongoDB và PostgreSQL Use Case Pattern: Business logic được tách biệt trong các use case Adapter Pattern: Controllers sử dụng adapters để tương tác với use cases Dependency Inversion: Core không phụ thuộc vào infrastructure Factory Pattern: Cho việc tạo các service instances 🗂️ Cấu trúc thư mục Apply to redis-auth-t... Utilities ��️ Công nghệ sử dụng Backend Framework NestJS (v11.0.10) - Node.js framework TypeScript (5.7.3) - Type safety SWC - Fast TypeScript compiler Databases MongoDB (v4.2.20) với Mongoose PostgreSQL với TypeORM Redis - Caching Authentication & Authorization JWT tokens Role-based access control (RBAC) Permission-based authorization Infrastructure & DevOps Docker & Docker Compose PM2 - Process management OpenTelemetry - Observability Prometheus - Metrics Grafana - Monitoring Zipkin - Distributed tracing Loki - Log aggregation Testing Jest - Testing framework Testcontainers - Integration testing 100% test coverage target Code Quality ESLint - Linting Prettier - Code formatting Husky - Git hooks Commitlint - Commit message validation 🚀 Tính năng chính 1. CRUD Operations Generic CRUD cho cả MongoDB và PostgreSQL Search, pagination, sorting Entity validation với Zod Logical deletion 2. Authentication & Authorization Login/Logout Password reset với email Refresh token Role-based permissions 3. Observability Tracing: OpenTelemetry với Zipkin Metrics: Prometheus integration Logging: Structured logging với Pino Health checks: Application health monitoring 4. Infrastructure Services Email Service: Nodemailer với Handlebars templates Cache Service: Redis và NodeCache HTTP Service: Axios với retry logic Logger Service: MongoDB transport 5. Development Tools CRUD Scaffolding: Tự động tạo CRUD operations Swagger Documentation: API documentation Database Migrations: Cho cả MongoDB và PostgreSQL Hot reload: Development mode 🔧 Scripts và Commands Apply to redis-auth-t... code 📊 Monitoring & Observability Dự án có đầy đủ stack observability: Grafana (port 9600) - Dashboards Prometheus (port 9620) - Metrics collection Zipkin (port 9610) - Distributed tracing Mongo Express (port 9820) - MongoDB admin PgAdmin (port 9810) - PostgreSQL admin �� Điểm mạnh Kiến trúc sạch: Onion Architecture đảm bảo separation of concerns Type Safety: TypeScript với Zod validation Test Coverage: 100% test coverage target Observability: Đầy đủ monitoring stack Scalability: Microservice-ready architecture Developer Experience: Scaffolding tools và hot reload Multi-database: Hỗ trợ cả MongoDB và PostgreSQL Production Ready: Docker, PM2, security headers �� Kết luận Đây là một boilerplate template rất chất lượng cho việc phát triển microservice với NestJS. Dự án thể hiện best practices trong việc: Tổ chức code theo Clean Architecture Implement các design patterns phù hợp Setup observability và monitoring Đảm bảo code quality và testing Chuẩn bị cho production deployment Template này phù hợp cho các dự án enterprise cần scalability, maintainability và observability cao.

Task: Refactor the existing NestJS boilerplate for the "DatBan" restaurant reservation system into a microservices architecture using event-driven architecture with RabbitMQ for async communication, gRPC for sync communication, Kong as the API Gateway, and PostgreSQL, MongoDB, and Redis as data stores. Preserve all original best practices (Onion Architecture, DDD, Ports & Adapters, 100% test coverage, observability)
